<app-navbar></app-navbar>
<div class="container-fluid">
  <div class="container container-0" style="color:white;">
    <div>
      <div>
        <div class="heading">
           <h1>Available Doctors</h1>
            <!-- <div class="sorting">
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle sorting-button" type="button" id="payment-mode" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <span class="dropdown-text">Payment Method</span>
              </button>
              <div class="dropdown-menu items" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">All</a>
                <a class="dropdown-item" href="#">Credit Card</a>
                <a class="dropdown-item" href="#">Debit Card</a>
                <a class="dropdown-item" href="#">Net Banking</a>
              </div>
            </div>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle sorting-button" type="button" id="sort-date" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <span class="dropdown-text">Billing Date</span>
              </button>
              <div class="dropdown-menu items" aria-labelledby="dropdownMenuButton">
              </div>
            </div>
          </div> -->
        </div>
      </div>
      <!-- <div class="s">
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Ratings
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#">Action</a>
        <a class="dropdown-item" href="#">Another action</a>
        <a class="dropdown-item" href="#">Something else here</a>
      </div>
    </div>
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Location
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#">Action</a>
        <a class="dropdown-item" href="#">Another action</a>
        <a class="dropdown-item" href="#">Something else here</a>
      </div>
    </div>
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Online
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#">Action</a>
        <a class="dropdown-item" href="#">Another action</a>
        <a class="dropdown-item" href="#">Something else here</a>
      </div>
    </div>
  </div> -->
    </div>
    <!-- <p class="rest">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's
      standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make
      a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting,
      remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing
      Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions
      of Lorem Ipsum.
    </p> -->
  </div>
</div>
<div class="container container-1">
  <div class="row">
    <p class="message" *ngIf="message">{{message}}</p>
    <ng-container *ngFor="let doctor of doctors;let i =index;">
      <div class="col col-12 col-xl-4 col-lg-4 col-md-6 col-sm-12" style="display: flex;justify-content: center">
        <div class="card doctor-info" style="margin-bottom: 25px;width: 300px;">
          <div class="card-header doctor-info-header">
            <div class="row">
              <div class="col col-4 col-xl-4 col-lg-4 col-md-4 col-sm-4">
                <img class="doctor-info-image" (click)="navigate(doctor)" [src]="sharedService.isValidImage(doctor.picUrl) ? (doctor.picUrl | safe: 'url'): ' ' " />
                <div [ngSwitch]="doctor.status">
                  <div *ngSwitchCase="'Online'">
                      <div class="status-online" title="Online"></div>
                  </div>
                  <div *ngSwitchCase="'Offline'">
                      <div class="status-offline" title="Offline"></div>
                  </div>
                  <div *ngSwitchCase="'Busy'">
                      <div class="status-busy" title="Busy"></div>
                  </div>
              </div>
              </div>
              <div class="col col-8 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div>
                  <p class="doctor-info-name">{{doctor.firstName+' '+doctor.lastName}}</p>
                  <span class="doctor-info-price">&#8377;{{doctor.price || 0}}</span>
                  <span class="sub-heading-text small">&nbsp;&nbsp;Per Hour</span>
                </div>
              </div>
            </div>
          </div>
          <div class="card-body doctor-info-body">
            <div class="row doctor-info-body-row">
              <div class="col col-7 col-xl-7 col-lg-7 col-md-7 col-sm-7 doctor-info-experience">
                <span class="sub-heading-text">Experience: </span>
                <span> {{doctor.experience}} years</span>
              </div>
              <div class="col col-5 col-xl-5 col-lg-5 col-md-5 col-sm-5 doctor-info-patients">
                <span class="sub-heading-text">Patients: </span>
                <span>{{doctor.count || 0}}</span>
              </div>
            </div>
            <span class="sub-heading-text">Info</span>
            <p class="sub-heading-text-value">{{doctor.speciality || 'Not Updated'}}</p>
            <span class="sub-heading-text">Locations</span>
            <p class="sub-heading-text-value">{{doctor.location || 'Not Updated'}}</p>
            <span class="sub-heading-text">Consults via</span>
            <p class="sub-heading-text-value">{{doctor.consultationMode || 'Not Updated'}}</p>
          </div>
          <div class="card-footer">
              <button class="btn pay-button" [disabled]="doctor.status === 'Offline' ||  doctor.status === 'Busy'" (click)="consultNow(doctor, $event);">PAY AND CONSULT NOW</button>
              <span style="position: absolute;bottom: 3px; left: 50%; transform: translateX(-50%);color: red" *ngIf="doctor.status === 'Offline' || doctor.status === 'Busy'">{{ doctor.status === 'Offline' ? 'Doctor Offline' : 'Doctor Busy'}}</span>
              <div *ngIf="doctor.message" style="position: absolute;bottom: 3px; left: 50%; transform: translateX(-50%); color:#877474">
                  <span style="white-space: pre; color: red;font-size: 12px;" *ngIf="doctor.message && doctor.message!=='chat'">{{ doctor.message }}</span>
                  <a [routerLink]="['/chat',selectedUser.id]" [queryParams]="{inactive_group:doctor.group}" *ngIf="doctor.message==='chat'">
                    Active group
                  </a>
              </div>
          </div>
        </div>
      </div>
    </ng-container>
    <p class="message" style="text-align: center;width: 100%" *ngIf="emptyDoctors && !message">There are no more doctors available</p>
  </div>
</div>
<app-footer></app-footer>

<!-- <div class="container">
    <small>{{ message }}</small>
    <div *ngFor="let doctor of doctors" class="card mb-3 shadow">
        <div class="card-body">
            <div *ngIf="doctor.availability || doctor.status" style="text-align:center;color:red">
                <span *ngIf="doctor.availability === 'Offline' || doctor.status === 'Offline'">Doctor is currently unavailable</span>
                <span *ngIf="doctor.availability === 'Busy' || doctor.status === 'Busy'">Doctor is currently in another consultation</span>
            </div>
            <div class="row">
                <div class="col col-2 col-xl-2 col-lg-2 col-md-2 col-sm-3 col-xs-2">
                    <img [src]="doctor.picUrl | safe: 'url'" class="display-image" alt="avatar">
                    <div class="status-online" title="Online" *ngIf="doctor.status === 'Online';"></div>
                    <div class="status-offline" title="Offline" *ngIf="doctor.status === 'Offline';"></div>
                    <div class="status-away" title="Away" *ngIf="doctor.status === 'Busy';"></div>
                    <div class="status-invisible" title="Invisible" *ngIf="doctor.status === 'invisible';"></div>
                </div>
                <div class="col col-10 col-xl-10 col-lg-10 col-md-10 col-sm-7 col-xs-8">
                    <h5 class="card-title">Dr. {{ doctor.firstName }} {{ doctor.lastName }}</h5>
                    <p>{{ doctor.qualificationStr }} -{{ doctor.speciality }}, {{ doctor.experience }} years of practice</p>
                    <p class="card-text small-font">Speaks: {{ doctor.languageStr }}</p>
                    <p class="card-text small-font">Consults via: {{ doctor.consultationModeStr }}</p>
                    <p class="card-text small-font">{{ doctor.shortBio }}</p>
                    <p class="card-text small-font">
                        <i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp;&nbsp;{{ doctor.locationStr }}</p>
                    <small>
              <rating [(ngModel)]="doctor.ratingValue" [readonly]="true"> </rating>
            </small>
                    <div class="row">
                        <div class="col col-12 col-xl-7 col-lg-7 col-md-7 col-sm-12">
                            <p class="card-text text-muted">
                                <small>Last updated {{ doctor.lastupdated }} ago</small>
                            </p>
                        </div>
                        <div class="col col-12 col-xl-5 col-lg-5 col-md-5 col-sm-12">
                            <button class="btn btn-primary" (click)="openDoctorProfile(doctor);">View Profile</button>
                            <button class="btn btn-primary" *ngIf="doctor.status === 'Online'&& !doctor.unavailable" (click)="consultNow(doctor, $event);">Pay and Consult Now</button>
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align: center;color:#877474">
                <span *ngIf="doctor.message && doctor.message!=='chat'">{{ doctor.message }}</span>
                <span *ngIf="doctor.message && doctor.message==='chat'">You have an active group with this doctor.
                <a [routerLink]="['/chat',selectedUser.id]" [queryParams]="{inactive_group:doctor.group}">
                    Click here to get there
                </a>
            </span>
            </div>
        </div>
    </div>
</div> -->
